{% extends "hosterbase.html" %}
{% block body %}

<h3>Bag {{ bag.name }}</h3>

<div id="bagfavorite">
    <form action="{{ server_prefix }}/bagfavor" method="POST">
    <input type="submit" value="favorite" />
    <input type="hidden" name="bag" value="{{ bag.name }}" />
    </form>
</div>


<div id="description">
    <strong>Description:</strong><span id="bagdesc">{{ bag.desc }}</span>
</div>

{% if delete %}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"
    type="text/javascript"></script>
<script type="text/javascript">
    var server_prefix='{{ server_prefix }}';
    var current_username='{{ user.name }}';
</script>
<script src="{{ server_prefix }}/bags/hoster/tiddlers/bagmanage.js"
    type="text/javascript"></script>
{% endif %}
{% if policy %}
<div id="policy">
    <h4>Policy</h4>
    <dl>
    {% for constraint in ['read', 'write', 'create', 'delete', 'manage'] %}
    <dt>{{ constraint }}</dt>
    <dd><ul>{% for entry in policy[constraint] %}
        <li>{{ entry }}</li>
        {% endfor %}
    </ul></dd>
    {% endfor %}
    </dl>
</div>
{% endif %}

<div id="representations">
    {{ representations }}
</div>

<ul>
{% for tiddler in bag.gen_tiddlers() %}
<li class="listedtiddler"><a
    href="{{ server_prefix }}/bags/{{ bag.name }}/tiddlers/{{ tiddler.title }}">{{ tiddler.title }}</a></li>
{% endfor %}
</ul>
{% endblock %}
